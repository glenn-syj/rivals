# k6 성능 테스트 가이드

이 문서는 `rivals` 프로젝트의 백엔드 API 성능을 측정하기 위한 `k6` 테스트 실행 방법을 안내합니다.

## 1. 사전 준비: k6 설치

이 테스트를 실행하려면 로컬 컴퓨터에 `k6`가 설치되어 있어야 합니다.

- **Windows (winget 사용):**
  `winget`이 "k6"라는 이름의 패키지를 여러 개 찾을 수 있으므로, 아래와 같이 고유 ID를 사용하여 명확하게 설치하는 것을 권장합니다.

  ```shell
  winget install k6.k6
  ```

- **macOS (Homebrew 사용):**

  ```shell
  brew install k6
  ```

- **기타 운영체제:**
  [k6 공식 설치 가이드](https://k6.io/docs/getting-started/installation/)를 참고하여 설치를 진행해주세요.

## 2. 테스트 실행 방법

1.  테스트를 실행하기 전에, 성능을 측정할 백엔드 애플리케이션이 로컬에서 실행 중인지 확인해주세요. (기본 포트: `8080`)

2.  터미널을 열고 이 `README.md` 파일이 위치한 `infra/k6` 디렉토리로 이동합니다.

3.  `summoner-list.csv`를 다음 헤더를 기준으로 작성해주세요. `gameName,tagLine`

4.  아래 명령어를 실행하여 테스트를 시작합니다.
    ```shell
    k6 run baseline-test.js
    ```

## 3. 결과 해석 가이드

테스트가 완료되면 터미널에 다양한 성능 지표가 출력됩니다. 여기서 우리가 주목해야 할 핵심 지표는 다음과 같습니다.

- `✓ checks`: 요청의 성공 여부를 판단하는 `check` 함수의 성공률입니다. **99% 이상**이 아니라면 API 응답에 문제가 있다는 신호입니다.

- `http_req_duration`: **API 응답 시간**을 의미합니다.

  - `avg`: 평균 응답 시간
  - `p(95)`: 전체 요청 중 95%가 이 시간 안에 완료되었음을 의미합니다. (가장 중요한 지표 중 하나)
  - `p(99)`: 전체 요청 중 99%가 이 시간 안에 완료되었음을 의미합니다.

- `http_reqs`: **서버 처리량(Throughput)**을 의미합니다.

  - 오른쪽에 표시되는 `.../s`는 서버가 **초당 몇 개의 요청(RPS, Requests Per Second)**을 처리했는지를 나타냅니다.

- `http_req_failed`: 실패한 요청의 비율입니다. `options.thresholds`에 설정된 기준(`rate<0.01`)을 넘으면 테스트가 실패로 표시됩니다.
